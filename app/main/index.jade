doctype 5
html(ng-app="App", manifest="/web.appcache")
    head
        title Quipu

        link(rel="stylesheet", href="/css/vendor.css")
        link(rel='stylesheet', href="/css/main.css")

    body
      nav.navbar.navbar-default.navbar-fixed-top.navbar-inverse(role="navigation", ng-controller="NavCtrl")
        .container-fluid.hidden-xs
          .navbar-header
            a.navbar-brand(href ng-click="go('/bigevents')") Quipu
          ul.nav.navbar-nav.navbar-right.hidden-xs
            li <a href ng-click="go('/members')">Members</a>
            li <a href ng-click="go('/chat')">Chat</a>
            li <a href ng-click="go('/files')">Files</a>
        .container-fluid.visible-xs
          span(ng-show="group.name")
            span.pointer.navbar-text(ng-click='clearGroup()', class="glyphicon glyphicon-chevron-left").back
            span.bigger.navbar-text Tester
          span.vcenter(ng-show="!group.name")
            a.bigger.navbar-text(href ng-click="go('/bigevents')") Quipu
          span.btn-group.leftbuttons
            button(type="button", ng-click='goEvents()', class="btn navbar-btn btn-sm")
              span(class="glyphicon glyphicon-th-list")
            button(type="button", ng-clock='goMembers()', class="btn navbar-btn btn-sm") 
              span(class="glyphicon glyphicon-user")
            button(type="button", ng-click='goChat()', class="btn navbar-btn btn-sm") 
              span(class="glyphicon glyphicon-comment")
            button(type="button", ng-click='goFiles()', class="btn navbar-btn btn-sm")
              span(class="glyphicon glyphicon-folder-open")
      .container-fluid
        .row(ng-controller="MainCtrl")
          .col-sm-2(ng-controller="GroupCtrl", ng-class="{'hidden-xs': group.id}")
            ng-include(src="'app/main/group.jade'")
          div(ng-class="{'col-sm-8': !big, 'col-sm-10': big, 'hidden-xs': !group.id}")
            div(ng-view)
          div.events.hidden-xs(ng-class="{'col-sm-2': !big, hidden: big}", ng-controller="EventsCtrl")
            ng-include(src="'app/main/events.jade'")
      .options(ng-controller="PrefCtrl") 
          a.spaced(ng-click="about()") About
          a.spaced(ng-click="setupUser()") Preferences
          a.spaced(href='/logout') Log out

      script(type="text/ng-template", id="askId")
          div.modal-header
              h3 User Information
          div.modal-body
              form(role="form", class="form-horizontal", ng-submit="dismiss()")
                  p(class="text-right")
                      a(ng-click="fbLogin()") Connect with Facebook
                  div(class="form-group")
                      label(class="col-sm-2 control-label") Full name
                      div(class="col-sm-10")
                          input(type="text", ng-model="me.name", placeholder="Full name", class="form-control")
                  div(class="form-group")
                      label(class="col-sm-2 control-label") College
                      div(class="col-sm-10")
                          input(type="text", ng-model="me.college", placeholder="College", class="form-control")
                  div(class="form-group")
                      label(class="col-sm-2 control-label")  Picture
                      div(class="col-sm-10 control-label")
                        div(class="dropbox", ng-show="dropSupported",
                          ng-file-drop="onImgSelect($files);",
                          ng-file-drop-available="dropSupported=true")
                            span(ng-if="!me.image") Drop Image Here
                            img(ng-if="me.image", ng-src="{{me.image}}")
          div.modal-footer

      script(type="text/ng-template", id="aboutId")
          div.modal-header
              h3 About Quipu
          div.modal-body
              p Quipu is a tool to create study groups. It is open source under an MIT license:
                  | check out our code on <a href='http://github.com/bogiebro/classapp'>GitHub</a>.
                  | Feedback should be directed to quipu at gmail dot com.
          div.modal-footer
              p.smaller
                  small &copy; 2014 Sam Anklesaria, Iyob Gebremariam, Isaac Reilly,
                      | James Batchelder, Peter Nguyen, Jadon Montero

      script(src='/js/angular-file-upload-html5-shim.min.js')
      script(src='/js/vendor.js')
      script(src='/js/angular-file-upload.min.js')
      script(src='https://cdn.firebase.com/v0/firebase.js')
      script(src='https://cdn.firebase.com/libs/angularfire/0.6.0/angularfire.min.js')
      script(src='/js/main.js')
      script(src='/js/app.main.templates.js')

